---
import Layout from '../layouts/Layout.astro';
import json from '../assets/Data/Data.json';
import Link from '../components/Link.astro';
import avatar from '../assets/Images/avatar.webp';
import Dots from '../assets/icons/Dots.svg';
---

<Layout title='Agustin Morales'>
	<nav
		id='navbar'
		class='fixed my-2 mx-4 grid w-11/12 grid-cols-[1fr-auto-1fr] rounded-[72px] border border-transparent py-2 pr-6 pl-3'>
		<img
			id='1'
			width='40'
			class='hidden rounded-full'
			src={avatar}
			alt=''
		/>
		<p
			id='2'
			class='col-start-2 hidden items-center self-center text-center font-semibold'>
			AgustinMorales
		</p>
		<button
			class='col-start-3 flex h-10 w-10 items-center justify-center place-self-end rounded-full border bg-white'>
			<img
				width='16'
				src={Dots}
				alt='dots image for open menu'
			/>
		</button>
	</nav>

	<main class='flex w-full flex-col justify-center px-4 pt-16'>
		<header class='flex flex-col items-center'>
			<img
				width='96'
				class='mb-4 rounded-full'
				src={avatar}
				alt=''
			/>
			<h1 class='font-bold'>Agustin Morales</h1>
			<h2 class='font'>Frontend Developer</h2>
		</header>
		<ul class='flex w-full flex-col items-center gap-4'>
			{
				json.map((data) => (
					<Link
						title={data.title}
						href={data.url}
						icon={data.icon}
						share={data.share}
					/>
				))
			}
		</ul>
	</main>

	<footer class='fixed bottom-0 left-0 w-full bg-red-300 text-center'>
		Made with <span>游눘</span>
		<a href='https://github.com/EA-Morales'>Agustin Morales</a>
	</footer>
</Layout>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		// Obtener el elemento de la barra de men칰
		const parrafo = document.getElementById('2');
		const image = document.getElementById('1');
		const navbar = document.getElementById('navbar');

		// Obtener la posici칩n inicial de la p치gina
		let startPosition = window.pageYOffset;

		// Agregar un evento de escucha de desplazamiento
		window.addEventListener('scroll', function () {
			// Obtener la posici칩n actual de la p치gina
			const currentPosition = window.pageYOffset;

			if (currentPosition === 0) {
				navbar.classList.remove('nav-visible');
				navbar.classList.add('border-transparent');
				image.classList.add('hidden');
				parrafo.classList.add('hidden');
			}

			// Verificar si la p치gina se ha desplazado hacia abajo
			if (currentPosition > startPosition && !!parrafo && !!image) {
				// Si se ha desplazado hacia abajo, agregar una clase para mostrar la barra de men칰
				navbar.classList.add('nav-visible');
				navbar.classList.remove('border-transparent');
				image.classList.remove('hidden');
				parrafo.classList.remove('hidden');
			}

			// Actualizar la posici칩n inicial de la p치gina
			startPosition = currentPosition;
		});
	});
</script>
